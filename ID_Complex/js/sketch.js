// Generated by CoffeeScript 2.4.1
var Complex, app, draw, setup;

app = null;

Complex = class Complex {
  constructor() {
    this.RADIUS = 25;
    this.level = 1;
    this.createGame();
  }

  gr() {
    var i, j, len, ref;
    sc(1, 1, 1, 0.5);
    ref = range(21);
    for (j = 0, len = ref.length; j < len; j++) {
      i = ref[j];
      line(0, 10 * i, 200, 10 * i);
      line(10 * i, 0, 10 * i, 200);
    }
    sc(1, 1, 1);
    line(100, 0, 100, 200);
    return line(0, 100, 200, 100);
  }

  draw() {
    bg(0);
    this.gr();
    sc();
    fc(1, 0, 0);
    circle(100 + 10 * this.b[0], 100 - 10 * this.b[1], 5);
    fc(0, 1, 0);
    return circle(100 + 10 * this.a[0], 100 - 10 * this.a[1], 4);
  }

  newGame() {
    var d;
    if (this.level >= this.history.length && _.isEqual(this.a, this.b)) {
      d = 1;
    } else {
      d = -1;
    }
    this.level = constrain(this.level + d, 1, 16);
    return this.createGame();
  }

  createGame() {
    var expand, j, k, len, len1, level, q1, q2, ref, visited, x, y;
    this.history = [];
    this.a = [-10 + _.random(20), -10 + _.random(20)];
    q1 = [this.a];
    q2 = [];
    visited = {};
    visited[this.a] = true;
    expand = function(n) {
      if (visited[n]) {
        return;
      }
      if (n[0] * n[0] + n[1] * n[1] > 1000) {
        return;
      }
      visited[n] = true;
      return q2.push(n);
    };
    ref = range(this.level);
    for (j = 0, len = ref.length; j < len; j++) {
      level = ref[j];
      for (k = 0, len1 = q1.length; k < len1; k++) {
        [x, y] = q1[k];
        expand([y, x]);
        expand([-y, x]);
        expand([2 * x, 2 * y]);
        expand([x + 1, y]);
      }
      q1 = q2;
      q2 = [];
    }
    return this.b = this.selectTarget(q1);
  }

  selectTarget(lst) {
    var bs, x, y;
    bs = (function() {
      var j, len, results;
      results = [];
      for (j = 0, len = lst.length; j < len; j++) {
        [x, y] = lst[j];
        if ((-10 <= x && x <= 10) && (-10 <= y && y <= 10)) {
          results.push([x, y]);
        }
      }
      return results;
    })();
    if (bs.length > 0) {
      return bs[_.random(bs.length)];
    }
    return _.min(lst, function([x, y]) {
      return dist(0, 0, x, y);
    });
  }

  undo() {
    if (this.history.length === 0) {
      return;
    }
    return this.a = this.history.pop();
  }

  op(pair) {
    this.history.push(this.a);
    return this.a = pair;
  }

};

setup = function() {
  createCanvas(200, 200);
  app = new Complex;
  button('m', function() {
    return app.op([app.a[1], app.a[0]]);
  });
  button('*i', function() {
    return app.op([-app.a[1], app.a[0]]);
  });
  button('*2', function() {
    return app.op([2 * app.a[0], 2 * app.a[1]]);
  });
  button('+1', function() {
    return app.op([app.a[0] + 1, app.a[1]]);
  });
  button('undo', function() {
    return app.undo();
  });
  return button('new', function() {
    return app.newGame();
  });
};

draw = function() {
  return app.draw();
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUE7O0FBQUEsR0FBQSxHQUFNOztBQUVBLFVBQU4sTUFBQSxRQUFBO0VBRUMsV0FBYyxDQUFBLENBQUE7SUFDYixJQUFDLENBQUEsTUFBRCxHQUFVO0lBQ1YsSUFBQyxDQUFBLEtBQUQsR0FBUztJQUNULElBQUMsQ0FBQSxVQUFELENBQUE7RUFIYTs7RUFLZCxFQUFLLENBQUEsQ0FBQTtBQUNKLFFBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUE7SUFBQSxFQUFBLENBQUcsQ0FBSCxFQUFLLENBQUwsRUFBTyxDQUFQLEVBQVMsR0FBVDtBQUNBO0lBQUEsS0FBQSxxQ0FBQTs7TUFDQyxJQUFBLENBQUssQ0FBTCxFQUFRLEVBQUEsR0FBSyxDQUFiLEVBQWdCLEdBQWhCLEVBQXFCLEVBQUEsR0FBSyxDQUExQjtNQUNBLElBQUEsQ0FBSyxFQUFBLEdBQUssQ0FBVixFQUFhLENBQWIsRUFBZ0IsRUFBQSxHQUFLLENBQXJCLEVBQXdCLEdBQXhCO0lBRkQ7SUFHQSxFQUFBLENBQUcsQ0FBSCxFQUFLLENBQUwsRUFBTyxDQUFQO0lBQ0EsSUFBQSxDQUFLLEdBQUwsRUFBUyxDQUFULEVBQVksR0FBWixFQUFnQixHQUFoQjtXQUNBLElBQUEsQ0FBSyxDQUFMLEVBQU8sR0FBUCxFQUFZLEdBQVosRUFBZ0IsR0FBaEI7RUFQSTs7RUFTTCxJQUFPLENBQUEsQ0FBQTtJQUNOLEVBQUEsQ0FBRyxDQUFIO0lBQ0EsSUFBQyxDQUFBLEVBQUQsQ0FBQTtJQUNBLEVBQUEsQ0FBQTtJQUNBLEVBQUEsQ0FBRyxDQUFILEVBQUssQ0FBTCxFQUFPLENBQVA7SUFDQSxNQUFBLENBQU8sR0FBQSxHQUFJLEVBQUEsR0FBRyxJQUFDLENBQUEsQ0FBRSxDQUFBLENB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LENBQUEsQ0FBQSxDQUFSLEVBQVcsR0FBRyxDQUFDLENBQUUsQ0FBQSxDQUFBLENBQWpCLENBQVA7RUFBSCxDQUFiO0VBQ0EsTUFBQSxDQUFPLElBQVAsRUFBYSxRQUFBLENBQUEsQ0FBQTtXQUFHLEdBQUcsQ0FBQyxFQUFKLENBQU8sQ0FBQyxDQUFBLEdBQUUsR0FBRyxDQUFDLENBQUUsQ0FBQSxDQUFBLENBQVQsRUFBWSxDQUFBLEdBQUUsR0FBRyxDQUFDLENBQUUsQ0FBQSxDQUFBLENBQXBCLENBQVA7RUFBSCxDQUFiO0VBQ0EsTUFBQSxDQUFPLElBQVAsRUFBYSxRQUFBLENBQUEsQ0FBQTtXQUFHLEdBQUcsQ0FBQyxFQUFKLENBQU8sQ0FBQyxHQUFHLENBQUMsQ0FBRSxDQUFBLENBQUEsQ0FBTixHQUFTLENBQVYsRUFBWSxHQUFHLENBQUMsQ0FBRSxDQUFBLENBQUEsQ0FBbEIsQ0FBUDtFQUFILENBQWI7RUFDQSxNQUFBLENBQU8sTUFBUCxFQUFlLFFBQUEsQ0FBQSxDQUFBO1dBQUcsR0FBRyxDQUFDLElBQUosQ0FBQTtFQUFILENBQWY7U0FDQSxNQUFBLENBQU8sS0FBUCxFQUFjLFFBQUEsQ0FBQSxDQUFBO1dBQUcsR0FBRyxDQUFDLE9BQUosQ0FBQTtFQUFILENBQWQ7QUFSTzs7QUFVUixJQUFBLEdBQU8sUUFBQSxDQUFBLENBQUE7U0FBRyxHQUFHLENBQUMsSUFBSixDQUFBO0FBQUgiLCJzb3VyY2VzQ29udGVudCI6WyJhcHAgPSBudWxsXHJcblxyXG5jbGFzcyBDb21wbGV4XHJcblxyXG5cdGNvbnN0cnVjdG9yIDogLT5cclxuXHRcdEBSQURJVVMgPSAyNVxyXG5cdFx0QGxldmVsID0gMVxyXG5cdFx0QGNyZWF0ZUdhbWUoKVxyXG5cclxuXHRnciA6IC0+XHJcblx0XHRzYyAxLDEsMSwwLjVcclxuXHRcdGZvciBpIGluIHJhbmdlIDIxXHJcblx0XHRcdGxpbmUgMCwgMTAgKiBpLCAyMDAsIDEwICogaVxyXG5cdFx0XHRsaW5lIDEwICogaSwgMCwgMTAgKiBpLCAyMDBcclxuXHRcdHNjIDEsMSwxXHJcblx0XHRsaW5lIDEwMCwwLCAxMDAsMjAwXHJcblx0XHRsaW5lIDAsMTAwLCAyMDAsMTAwXHJcblxyXG5cdGRyYXcgOiAtPlxyXG5cdFx0YmcgMFxyXG5cdFx0QGdyKClcclxuXHRcdHNjKClcclxuXHRcdGZjIDEsMCwwXHJcblx0XHRjaXJjbGUgMTAwKzEwKkBiWzBdLCAxMDAtMTAqQGJbMV0sIDVcclxuXHRcdGZjIDAsMSwwXHJcblx0XHRjaXJjbGUgMTAwKzEwKkBhWzBdLCAxMDAtMTAqQGFbMV0sIDRcclxuXHJcblx0bmV3R2FtZSA6IC0+XHJcblx0XHRpZiBAbGV2ZWwgPj0gQGhpc3RvcnkubGVuZ3RoIGFuZCBfLmlzRXF1YWwoQGEsQGIpIHRoZW4gZD0xIGVsc2UgZD0tMVxyXG5cdFx0QGxldmVsID0gY29uc3RyYWluIEBsZXZlbCtkLDEsMTZcclxuXHRcdEBjcmVhdGVHYW1lKClcclxuXHJcblx0Y3JlYXRlR2FtZSA6IC0+XHJcblx0XHRAaGlzdG9yeSA9IFtdXHJcblx0XHRAYSA9IFstMTAgKyBfLnJhbmRvbSgyMCksIC0xMCArIF8ucmFuZG9tKDIwKV1cclxuXHRcdHExID0gW0BhXVxyXG5cdFx0cTIgPSBbXVxyXG5cdFx0dmlzaXRlZCA9IHt9XHJcblx0XHR2aXNpdGVkW0BhXSA9IHRydWVcclxuXHRcdGV4cGFuZCA9IChuKSAtPlxyXG5cdFx0XHRpZiB2aXNpdGVkW25dIHRoZW4gcmV0dXJuXHJcblx0XHRcdGlmIG5bMF0qblswXSArIG5bMV0qblsxXSA+IDEwMDAgdGhlbiByZXR1cm5cclxuXHRcdFx0dmlzaXRlZFtuXSA9IHRydWVcclxuXHRcdFx0cTIucHVzaCBuXHJcblx0XHRmb3IgbGV2ZWwgaW4gcmFuZ2UgQGxldmVsXHJcblx0XHRcdGZvciBbeCx5XSBpbiBxMVxyXG5cdFx0XHRcdGV4cGFuZCBbeSx4XVxyXG5cdFx0XHRcdGV4cGFuZCBbLXkseF1cclxuXHRcdFx0XHRleHBhbmQgWzIqeCwyKnldXHJcblx0XHRcdFx0ZXhwYW5kIFt4KzEseV1cclxuXHRcdFx0cTEgPSBxMlxyXG5cdFx0XHRxMiA9IFtdXHJcblx0XHRAYiA9IEBzZWxlY3RUYXJnZXQgcTFcclxuXHJcblx0c2VsZWN0VGFyZ2V0IDogKGxzdCkgLT4gXHJcblx0XHRicyA9IChbeCx5XSBmb3IgW3gseV0gaW4gbHN0IHdoZW4gLTEwIDw9IHggPD0gMTAgYW5kIC0xMCA8PSB5IDw9IDEwKVxyXG5cdFx0cmV0dXJuIGJzW18ucmFuZG9tKGJzLmxlbmd0aCldIGlmIGJzLmxlbmd0aCA+IDBcclxuXHRcdF8ubWluIGxzdCwgKFt4LHldKSAtPiBkaXN0IDAsMCx4LHlcclxuXHJcblx0dW5kbyA6IC0+XHJcblx0XHRpZiBAaGlzdG9yeS5sZW5ndGggPT0gMCB0aGVuIHJldHVyblxyXG5cdFx0QGEgPSBAaGlzdG9yeS5wb3AoKVxyXG5cclxuXHRvcCA6IChwYWlyKSAtPlxyXG5cdFx0QGhpc3RvcnkucHVzaCBAYVxyXG5cdFx0QGEgPSBwYWlyXHJcblxyXG5zZXR1cCA9IC0+XHJcblx0Y3JlYXRlQ2FudmFzIDIwMCwyMDBcclxuXHRhcHAgPSBuZXcgQ29tcGxleFxyXG5cdGJ1dHRvbiAnbScsIC0+IGFwcC5vcCBbYXBwLmFbMV0sYXBwLmFbMF1dXHJcblx0YnV0dG9uICcqaScsIC0+IGFwcC5vcCBbLWFwcC5hWzFdLGFwcC5hWzBdXVxyXG5cdGJ1dHRvbiAnKjInLCAtPiBhcHAub3AgWzIqYXBwLmFbMF0sMiphcHAuYVsxXV1cclxuXHRidXR0b24gJysxJywgLT4gYXBwLm9wIFthcHAuYVswXSsxLGFwcC5hWzFdXVxyXG5cdGJ1dHRvbiAndW5kbycsIC0+IGFwcC51bmRvKClcclxuXHRidXR0b24gJ25ldycsIC0+IGFwcC5uZXdHYW1lKClcclxuXHJcbmRyYXcgPSAtPiBhcHAuZHJhdygpXHJcbiJdfQ==
//# sourceURL=c:\github\p5Dojo2\ID_Complex\coffee\sketch.coffee