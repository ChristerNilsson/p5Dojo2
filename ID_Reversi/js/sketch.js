// Generated by CoffeeScript 2.4.1
var Reversi, app, draw, mousePressed, setup;

app = null;

Reversi = class Reversi {
  constructor() {
    this.newGame();
  }

  newGame() {
    var i, j, k, l, len, len1, ref, ref1;
    this.board = [];
    this.drag = 0;
    ref = range(8);
    for (k = 0, len = ref.length; k < len; k++) {
      j = ref[k];
      this.board.push([]);
      ref1 = range(8);
      for (l = 0, len1 = ref1.length; l < len1; l++) {
        i = ref1[l];
        this.board[j].push(0);
      }
    }
    this.board[3][3] = 2; // White
    this.board[3][4] = 1; // Black
    this.board[4][3] = 1;
    return this.board[4][4] = 2;
  }

  draw() {
    var i, j, k, len, ref, results, sq;
    sc(0);
    ref = range(8);
    results = [];
    for (k = 0, len = ref.length; k < len; k++) {
      i = ref[k];
      results.push((function() {
        var l, len1, ref1, results1;
        ref1 = range(8);
        results1 = [];
        for (l = 0, len1 = ref1.length; l < len1; l++) {
          j = ref1[l];
          sq = this.board[j][i];
          fc(0, 1, 0);
          rect(20 + 20 * i, 20 + 20 * j, 20, 20);
          if (sq === 1 || sq === 2) {
            fc(sq - 1);
            results1.push(circle(30.5 + 20 * i, 30.5 + 20 * j, 10 - 2));
          } else {
            results1.push(void 0);
          }
        }
        return results1;
      }).call(this));
    }
    return results;
  }

  move(i, j) {
    var di, dj, i1, j1, k, l, len, len1, len2, m, mycol, other, ref, ref1, res, temp;
    res = [];
    mycol = 1 + this.drag % 2;
    other = [0, 2, 1][mycol];
    ref = [-1, 0, 1];
    for (k = 0, len = ref.length; k < len; k++) {
      di = ref[k];
      ref1 = [-1, 0, 1];
      for (l = 0, len1 = ref1.length; l < len1; l++) {
        dj = ref1[l];
        if (!(di === 0 && dj === 0)) {
          i1 = i + di;
          j1 = j + dj;
          temp = [];
          while ((0 <= i1 && i1 < 8) && (0 <= j1 && j1 < 8) && this.board[j1][i1] === other) {
            temp.push([i1, j1]);
            i1 = i1 + di;
            j1 = j1 + dj;
          }
          if ((0 <= i1 && i1 < 8) && (0 <= j1 && j1 < 8) && this.board[j1][i1] === mycol) {
            if (temp.length > 0) {
              res = res.concat(temp);
            }
          }
        }
      }
    }
    if (res.length > 0) {
      this.board[j][i] = mycol;
      for (m = 0, len2 = res.length; m < len2; m++) {
        [i, j] = res[m];
        this.board[j][i] = mycol;
      }
      return this.drag++;
    }
  }

  mousePressed(mx, my) {
    var i, j;
    i = int(mx / 20 - 1);
    j = int(my / 20 - 1);
    if ((0 <= i && i < 8) && (0 <= j && j < 8) && this.board[j][i] === 0) {
      return this.move(i, j);
    }
  }

};

setup = function() {
  createCanvas(200, 200);
  return app = new Reversi;
};

draw = function() {
  return app.draw();
};

mousePressed = function(event) {
  return app.mousePressed(event.x, event.y);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsWUFBQSxFQUFBOztBQUFBLEdBQUEsR0FBTTs7QUFFQSxVQUFOLE1BQUEsUUFBQTtFQUNDLFdBQWMsQ0FBQSxDQUFBO0lBQUcsSUFBQyxDQUFBLE9BQUQsQ0FBQTtFQUFIOztFQUVkLE9BQVUsQ0FBQSxDQUFBO0FBQ1QsUUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUE7SUFBQSxJQUFDLENBQUEsS0FBRCxHQUFTO0lBQ1QsSUFBQyxDQUFBLElBQUQsR0FBUTtBQUNSO0lBQUEsS0FBQSxxQ0FBQTs7TUFDQyxJQUFDLENBQUEsS0FBSyxDQUFDLElBQVAsQ0FBWSxFQUFaO0FBQ0E7TUFBQSxLQUFBLHdDQUFBOztRQUNDLElBQUMsQ0FBQSxLQUFNLENBQUEsQ0FBQSxDQUFFLENBQUMsSUFBVixDQUFlLENBQWY7TUFERDtJQUZEO0lBSUEsSUFBQyxDQUFBLEtBQU0sQ0FBQSxDQUFBLENBQUcsQ0FBQSxDQUFBLENBQVYsR0FBYSxFQU5iO0lBT0EsSUFBQyxDQUFBLEtBQU0sQ0FBQSxDQUFBLENBQUcsQ0FBQSxDQUFBLENBQVYsR0FBYSxFQVBiO0lBUUEsSUFBQyxDQUFBLEtBQU0sQ0FBQSxDQUFBLENBQUcsQ0FBQSxDQUFBLENBQVYsR0FBYTtXQUNiLElBQUMsQ0FBQSxLQUFNLENBQUEsQ0FBQSxDQUFHLENBQUEsQ0FBQSxDQUFWLEdBQWE7RUFWSjs7RUFZVixJQUFPLENBQUEsQ0FBQTtBQUNOLFFBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUE7SUFBQSxFQUFBLENBQUcsQ0FBSDtBQUNBO0FB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QUFJLEVBQUEsR0FBSyxFQUFMLEdBQVUsQ0FBZDtJQUNKLENBQUEsR0FBSSxHQUFBLENBQUksRUFBQSxHQUFLLEVBQUwsR0FBVSxDQUFkO0lBQ0osSUFBRyxDQUFBLENBQUEsSUFBSyxDQUFMLElBQUssQ0FBTCxHQUFTLENBQVQsQ0FBQSxJQUFlLENBQUEsQ0FBQSxJQUFLLENBQUwsSUFBSyxDQUFMLEdBQVMsQ0FBVCxDQUFmLElBQThCLElBQUMsQ0FBQSxLQUFNLENBQUEsQ0FBQSxDQUFHLENBQUEsQ0FBQSxDQUFWLEtBQWdCLENBQWpEO2FBQXdELElBQUMsQ0FBQSxJQUFELENBQU0sQ0FBTixFQUFRLENBQVIsRUFBeEQ7O0VBSGM7O0FBL0NoQjs7QUFvREEsS0FBQSxHQUFRLFFBQUEsQ0FBQSxDQUFBO0VBQ1AsWUFBQSxDQUFhLEdBQWIsRUFBaUIsR0FBakI7U0FDQSxHQUFBLEdBQU0sSUFBSTtBQUZIOztBQUlSLElBQUEsR0FBTyxRQUFBLENBQUEsQ0FBQTtTQUFHLEdBQUcsQ0FBQyxJQUFKLENBQUE7QUFBSDs7QUFDUCxZQUFBLEdBQWUsUUFBQSxDQUFDLEtBQUQsQ0FBQTtTQUFXLEdBQUcsQ0FBQyxZQUFKLENBQWlCLEtBQUssQ0FBQyxDQUF2QixFQUEwQixLQUFLLENBQUMsQ0FBaEM7QUFBWCIsInNvdXJjZXNDb250ZW50IjpbImFwcCA9IG51bGxcclxuXHJcbmNsYXNzIFJldmVyc2lcclxuXHRjb25zdHJ1Y3RvciA6IC0+IEBuZXdHYW1lKClcclxuXHJcblx0bmV3R2FtZSA6IC0+XHJcblx0XHRAYm9hcmQgPSBbXVxyXG5cdFx0QGRyYWcgPSAwXHJcblx0XHRmb3IgaiBpbiByYW5nZSA4XHJcblx0XHRcdEBib2FyZC5wdXNoIFtdXHJcblx0XHRcdGZvciBpIGluIHJhbmdlIDhcclxuXHRcdFx0XHRAYm9hcmRbal0ucHVzaCAwXHJcblx0XHRAYm9hcmRbM11bM109MiAjIFdoaXRlXHJcblx0XHRAYm9hcmRbM11bNF09MSAjIEJsYWNrXHJcblx0XHRAYm9hcmRbNF1bM109MVxyXG5cdFx0QGJvYXJkWzRdWzRdPTJcclxuXHJcblx0ZHJhdyA6IC0+XHJcblx0XHRzYyAwXHJcblx0XHRmb3IgaSBpbiByYW5nZSA4XHJcblx0XHRcdGZvciBqIGluIHJhbmdlIDhcclxuXHRcdFx0XHRzcSA9IEBib2FyZFtqXVtpXVxyXG5cdFx0XHRcdGZjIDAsMSwwXHJcblx0XHRcdFx0cmVjdCAyMCsyMCppLCAyMCsyMCpqLDIwLDIwXHJcblx0XHRcdFx0aWYgc3EgaW4gWzEsMl1cclxuXHRcdFx0XHRcdGZjIHNxLTFcclxuXHRcdFx0XHRcdGNpcmNsZSAzMC41KzIwKmksIDMwLjUrMjAqaiwxMC0yXHJcblxyXG5cdG1vdmUgOiAoaSxqKSAtPlxyXG5cdFx0cmVzID0gW11cclxuXHRcdG15Y29sID0gMSArIEBkcmFnICUgMlxyXG5cdFx0b3RoZXIgPSBbMCwyLDFdW215Y29sXVxyXG5cdFx0Zm9yIGRpIGluIFstMSwwLDFdXHJcblx0XHRcdGZvciBkaiBpbiBbLTEsMCwxXVxyXG5cdFx0XHRcdGlmIG5vdCAoZGk9PTAgYW5kIGRqPT0wKVxyXG5cdFx0XHRcdFx0aTE9aStkaVxyXG5cdFx0XHRcdFx0ajE9aitkalxyXG5cdFx0XHRcdFx0dGVtcCA9IFtdXHJcblx0XHRcdFx0XHR3aGlsZSAwIDw9IGkxIDwgOCBhbmQgMCA8PSBqMSA8IDggYW5kIEBib2FyZFtqMV1baTFdID09IG90aGVyXHJcblx0XHRcdFx0XHRcdHRlbXAucHVzaCBbaTEsajFdXHJcblx0XHRcdFx0XHRcdGkxID0gaTErZGlcclxuXHRcdFx0XHRcdFx0ajEgPSBqMStkalxyXG5cdFx0XHRcdFx0aWYgMCA8PSBpMSA8IDggYW5kIDAgPD0gajEgPCA4IGFuZCBAYm9hcmRbajFdW2kxXSA9PSBteWNvbFxyXG5cdFx0XHRcdFx0XHRpZiB0ZW1wLmxlbmd0aCA+IDAgdGhlblx0cmVzID0gcmVzLmNvbmNhdCB0ZW1wXHJcblx0XHRpZiByZXMubGVuZ3RoID4gMFxyXG5cdFx0XHRAYm9hcmRbal1baV0gPSBteWNvbFxyXG5cdFx0XHRmb3IgW2ksal0gaW4gcmVzIHRoZW5cdEBib2FyZFtqXVtpXSA9IG15Y29sXHJcblx0XHRcdEBkcmFnKytcclxuXHJcblx0bW91c2VQcmVzc2VkIDogKG14LG15KSAtPlxyXG5cdFx0aSA9IGludCBteCAvIDIwIC0gMVxyXG5cdFx0aiA9IGludCBteSAvIDIwIC0gMVxyXG5cdFx0aWYgMCA8PSBpIDwgOCBhbmQgMCA8PSBqIDwgOCBhbmQgQGJvYXJkW2pdW2ldID09IDAgdGhlbiBAbW92ZSBpLGpcclxuXHJcbnNldHVwID0gLT5cclxuXHRjcmVhdGVDYW52YXMgMjAwLDIwMFxyXG5cdGFwcCA9IG5ldyBSZXZlcnNpXHJcblxyXG5kcmF3ID0gLT4gYXBwLmRyYXcoKVxyXG5tb3VzZVByZXNzZWQgPSAoZXZlbnQpIC0+IGFwcC5tb3VzZVByZXNzZWQgZXZlbnQueCwgZXZlbnQueSJdfQ==
//# sourceURL=c:\github\p5Dojo2\ID_Reversi\coffee\sketch.coffee